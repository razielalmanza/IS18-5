<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
                
	<h:head>
    	<title>ErrorInicioSesionIH</title>
  	</h:head>
  
	<h:body>
  		<c:choose>
  			<c:when test="#{sesion.getIntentos() == 3}">
    			<h1>Iniciar sesión</h1> <br/>
				<p style="color:red;">Ha superado el número de intentos para iniciar sesión.</p>
				<p>Regresar a la <h:link value="página principal" outcome="PrincipalVisitanteIH?faces-redirect=true" /></p>
  			</c:when>
  			<c:otherwise>
    			<h1>Iniciar sesión</h1> <br/>
				<p style="color:red;">Nombre de usuario y/o contraseña inválidos. Inténtelo nuevamente.</p>
    			<h:form id="myForm">
      				<table>
        				<tr>
          					<td><p:messages id="messages" autoUpdate="true" closable="true" /></td>
        				</tr>
      				</table>
      				<table>
        				<tr>
          					<td>Nombre de usuario</td>
          					<td><p:inputText value="#{sesion.credencial.nombreUsuario}"
                           				 	 required="true" id="Username"
                           				 	 size="15"/></td>
        				</tr>
        				<tr>
          					<td>Contraseña</td>
          					<td><p:password value="#{sesion.credencial.contrasena}"
                          					required="true" id="Password"/></td>
        				</tr>
        				<tr>
          					<td colspan="2" align="center">
            					<p:commandButton action="#{sesion.iniciarSesion()}"
                             			 		 value="Acceder"/>
          					</td>
        				</tr>
      				</table>
    			</h:form>
    		</c:otherwise>
    	</c:choose>
  </h:body>
  
</html>
